{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/deep/eLibrary/screens/signup.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { Thumbnail } from \"native-base\";\nimport fire from \"../Firebase\";\nimport \"firebase/firestore\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport PP from \"./profileplaceholder\";\nimport FloatingTextError from \"./FloatingTextError\";\n\nvar Signup = function (_Component) {\n  _inherits(Signup, _Component);\n\n  var _super = _createSuper(Signup);\n\n  function Signup() {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      email: \"\",\n      username: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      errorMessage: \"\",\n      errorUsername: 0,\n      avatar: null\n    };\n\n    _this.handlefirebasesignup = function () {\n      if (_this.state.password != _this.state.confirmPassword) {\n        _this.setState({\n          errorMessage: \"Passwords do not match!\"\n        });\n      } else if (_this.state.email == \"\" || _this.state.username == \"\" || _this.state.password == \"\" || _this.state.username == \"\") {\n        _this.setState({\n          errorMessage: \"Please fill in all the fields!\"\n        });\n      } else if (_this.state.username.length < 7) {\n        _this.setState({\n          errorMessage: \"Username should be at least 7 characters long!\"\n        });\n      } else {\n        fire.auth().createUserWithEmailAndPassword(_this.state.email, _this.state.password).then(function () {\n          fire.firestore().collection(\"USERS\").doc(fire.auth().currentUser.uid.toString()).set({\n            email: _this.state.email,\n            username: _this.state.username,\n            profileUri: _this.state.avatar\n          });\n        }).then(function () {\n          fire.auth().currentUser.sendEmailVerification();\n        }).then(function () {\n          fire.auth().currentUser.updateProfile({\n            displayName: _this.state.username\n          }).then(function () {\n            Alert.alert(\"User name successfully updated!\");\n          }).catch(function (err) {\n            Alert.alert(err.toString());\n          });\n        }).catch(function (err) {\n          Alert.alert(err.toString());\n        });\n      }\n    };\n\n    _this.pickImagehandler = function _callee() {\n      var permissionResult, pickerResult;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n            case 2:\n              permissionResult = _context.sent;\n\n              if (!(permissionResult.granted === false)) {\n                _context.next = 6;\n                break;\n              }\n\n              alert(\"Permission to access camera roll is required!\");\n              return _context.abrupt(\"return\");\n\n            case 6:\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync());\n\n            case 8:\n              pickerResult = _context.sent;\n\n              if (!(pickerResult.cancelled === true)) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 11:\n              _this.setState({\n                avatar: pickerResult.uri\n              });\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.handleSignUp = function () {\n      fire.firestore().collection(\"USERS\").where(\"username\", \"==\", _this.state.username).get().then(function (snapshot) {\n        if (snapshot.empty) {\n          return _this.handlefirebasesignup();\n        } else {\n          return _this.setState({\n            errorMessage: \"Username already taken!\"\n          });\n        }\n      }).catch(function (err) {\n        Alert.alert(err.toString());\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(KeyboardAvoidingView, {\n        style: {\n          flex: 1,\n          backgroundColor: \"black\"\n        },\n        enabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 7\n        }\n      }, React.createElement(ScrollView, {\n        contentContainerStyle: {\n          flexGrow: 1\n        },\n        style: {\n          flex: 1\n        },\n        enabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: \"flex-end\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: this.pickImagehandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }\n      }, React.createElement(Thumbnail, {\n        style: {\n          borderWidth: 1,\n          borderColor: \"white\"\n        },\n        large: true,\n        source: {\n          uri: this.state.avatar ? this.state.avatar : PP\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 6\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          height: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 15\n        }\n      }), React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: \"flex-end\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 15\n        }\n      }, React.createElement(View, {\n        style: {\n          width: \"80%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: \"red\",\n          fontSize: 15\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 19\n        }\n      }, this.state.errorMessage))), React.createElement(View, {\n        style: {\n          height: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 15\n        }\n      }), React.createElement(View, {\n        style: {\n          flex: 10,\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 15\n        }\n      }, React.createElement(FloatingTextError, {\n        label: \"Email\",\n        placeholderTextColor: \"gray\",\n        keyboardType: \"email-address\",\n        onChangeText: function onChangeText(val) {\n          _this2.setState({\n            email: val\n          });\n        },\n        autoCapitalize: \"none\",\n        test: this.state.email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        style: {\n          height: 40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }\n      }), React.createElement(FloatingTextError, {\n        label: \"Username\",\n        placeholderTextColor: \"gray\",\n        onChangeText: function onChangeText(val) {\n          _this2.setState({\n            username: val\n          });\n        },\n        autoCapitalize: \"none\",\n        test: this.state.username,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        style: {\n          height: 40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }\n      }), React.createElement(FloatingTextError, {\n        label: \"Password\",\n        placeholderTextColor: \"gray\",\n        secureTextEntry: true,\n        onChangeText: function onChangeText(val) {\n          _this2.setState({\n            password: val\n          });\n        },\n        autoCapitalize: \"none\",\n        test: this.state.password,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        style: {\n          height: 40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }\n      }), React.createElement(FloatingTextError, {\n        label: \"Confirm Password\",\n        placeholderTextColor: \"gray\",\n        secureTextEntry: true,\n        onChangeText: function onChangeText(val) {\n          _this2.setState({\n            confirmPassword: val\n          });\n        },\n        autoCapitalize: \"none\",\n        test: this.state.confirmPassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        style: {\n          height: 40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 17\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: {\n          backgroundColor: \"#BB86FC\",\n          borderRadius: 5,\n          height: \"8%\",\n          width: \"80%\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          marginVertical: \"7%\"\n        },\n        onPress: this.handleSignUp,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20,\n          fontWeight: \"bold\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 19\n        }\n      }, \"SIGN UP\")), React.createElement(View, {\n        style: {\n          height: 40\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 17\n        }\n      }))))));\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\nexport { Signup as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"black\"\n  }\n});","map":{"version":3,"sources":["/home/deep/eLibrary/screens/signup.js"],"names":["React","Component","Thumbnail","fire","ImagePicker","PP","FloatingTextError","Signup","state","email","username","password","confirmPassword","errorMessage","errorUsername","avatar","handlefirebasesignup","setState","length","auth","createUserWithEmailAndPassword","then","firestore","collection","doc","currentUser","uid","toString","set","profileUri","sendEmailVerification","updateProfile","displayName","Alert","alert","catch","err","pickImagehandler","requestCameraRollPermissionsAsync","permissionResult","granted","launchImageLibraryAsync","pickerResult","cancelled","uri","handleSignUp","where","get","snapshot","empty","flex","backgroundColor","flexGrow","justifyContent","alignItems","borderWidth","borderColor","height","width","color","fontSize","val","borderRadius","marginVertical","fontWeight","styles","StyleSheet","create","container"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  SafeAreaView,\n  Button,\n  TouchableOpacity,\n  Pressable,\n  TextInput,\n  Alert,\n  FlatList,\n  ScrollView,\n  KeyboardAvoidingView,\n  Modal,\n} from \"react-native\";\nimport { Thumbnail } from \"native-base\";\n\nimport fire from \"../Firebase\";\nimport \"firebase/firestore\";\n\nimport * as ImagePicker from \"expo-image-picker\";\nimport PP from \"./profileplaceholder\";\nimport FloatingTextError from \"./FloatingTextError\";\n\nexport default class Signup extends Component {\n  state = {\n    email: \"\",\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    errorMessage: \"\",\n    errorUsername: 0,\n    avatar: null,\n  };\n\n  handlefirebasesignup = () => {\n    if (this.state.password != this.state.confirmPassword) {\n      this.setState({\n        errorMessage: \"Passwords do not match!\",\n      });\n    } else if (\n      this.state.email == \"\" ||\n      this.state.username == \"\" ||\n      this.state.password == \"\" ||\n      this.state.username == \"\"\n    ) {\n      this.setState({\n        errorMessage: \"Please fill in all the fields!\",\n      });\n    } else if (this.state.username.length < 7) {\n      this.setState({\n        errorMessage: \"Username should be at least 7 characters long!\",\n      });\n    } else {\n      fire\n        .auth()\n        .createUserWithEmailAndPassword(this.state.email, this.state.password)\n        .then(() => {\n          fire\n            .firestore()\n            .collection(\"USERS\")\n            .doc(fire.auth().currentUser.uid.toString())\n            .set({\n              email: this.state.email,\n              username: this.state.username,\n              profileUri: this.state.avatar,\n            });\n        })\n        .then(() => {\n          fire.auth().currentUser.sendEmailVerification();\n        })\n        .then(() => {\n          fire\n            .auth()\n            .currentUser.updateProfile({\n              displayName: this.state.username,\n            })\n            .then(() => {\n              Alert.alert(\"User name successfully updated!\");\n            })\n            .catch((err) => {\n              Alert.alert(err.toString());\n            });\n        })\n        .catch((err) => {\n          Alert.alert(err.toString());\n        });\n    }\n  };\n\n  pickImagehandler = async () => {\n    let permissionResult = await ImagePicker.requestCameraRollPermissionsAsync();\n\n    if (permissionResult.granted === false) {\n      alert(\"Permission to access camera roll is required!\");\n      return;\n    }\n\n    let pickerResult = await ImagePicker.launchImageLibraryAsync();\n\n    if (pickerResult.cancelled === true) {\n      return;\n    }\n    this.setState({\n      avatar: pickerResult.uri,\n    });\n  };\n\n  handleSignUp = () => {\n    fire\n      .firestore()\n      .collection(\"USERS\")\n      .where(\"username\", \"==\", this.state.username)\n      .get()\n      .then((snapshot) => {\n        if (snapshot.empty) {\n          return this.handlefirebasesignup();\n        } else {\n          return this.setState({\n            errorMessage: \"Username already taken!\",\n          });\n        }\n      })\n      .catch((err) => {\n        Alert.alert(err.toString());\n      });\n  };\n\n  render() {\n    return (\n      <KeyboardAvoidingView\n        style={{\n          flex: 1,\n          backgroundColor: \"black\",\n        }}\n        enabled={true}\n      >\n        <ScrollView\n          contentContainerStyle={{ flexGrow: 1 }}\n          style={{ flex: 1 }}\n          enabled={true}\n        >\n          <View style={{ flex: 1 }}>\n            <View\n              style={{\n                flex: 1,\n\n                justifyContent: \"flex-end\",\n                alignItems: \"center\",\n              }}\n            >\n              <TouchableOpacity onPress={this.pickImagehandler}>\n                <Thumbnail\n                  style={{ borderWidth: 1, borderColor: \"white\" }}\n                  large\n                  source={{\n                    uri: this.state.avatar ? this.state.avatar : PP,\n                  }}\n                />\n              </TouchableOpacity>\n            </View>\n            <View\n              style={{\n                flex: 6,\n              }}\n            >\n              <View style={{ height: 10 }}></View>\n              <View\n                style={{\n                  flex: 1,\n                  justifyContent: \"flex-end\",\n\n                  alignItems: \"center\",\n                }}\n              >\n                <View style={{ width: \"80%\" }}>\n                  <Text style={{ color: \"red\", fontSize: 15 }}>\n                    {this.state.errorMessage}\n                  </Text>\n                </View>\n              </View>\n              <View style={{ height: 10 }}></View>\n              <View\n                style={{\n                  flex: 10,\n\n                  alignItems: \"center\",\n                }}\n              >\n                <FloatingTextError\n                  label=\"Email\"\n                  placeholderTextColor=\"gray\"\n                  keyboardType=\"email-address\"\n                  onChangeText={(val) => {\n                    this.setState({ email: val });\n                  }}\n                  autoCapitalize=\"none\"\n                  test={this.state.email}\n                ></FloatingTextError>\n                <View style={{ height: 40 }}></View>\n                <FloatingTextError\n                  label=\"Username\"\n                  placeholderTextColor=\"gray\"\n                  onChangeText={(val) => {\n                    this.setState({ username: val });\n                  }}\n                  autoCapitalize=\"none\"\n                  test={this.state.username}\n                ></FloatingTextError>\n                <View style={{ height: 40 }}></View>\n                <FloatingTextError\n                  label=\"Password\"\n                  placeholderTextColor=\"gray\"\n                  secureTextEntry={true}\n                  onChangeText={(val) => {\n                    this.setState({ password: val });\n                  }}\n                  autoCapitalize=\"none\"\n                  test={this.state.password}\n                ></FloatingTextError>\n                <View style={{ height: 40 }}></View>\n                <FloatingTextError\n                  label=\"Confirm Password\"\n                  placeholderTextColor=\"gray\"\n                  secureTextEntry={true}\n                  onChangeText={(val) => {\n                    this.setState({ confirmPassword: val });\n                  }}\n                  autoCapitalize=\"none\"\n                  test={this.state.confirmPassword}\n                ></FloatingTextError>\n                <View style={{ height: 40 }}></View>\n                <TouchableOpacity\n                  style={{\n                    backgroundColor: \"#BB86FC\",\n                    borderRadius: 5,\n                    height: \"8%\",\n                    width: \"80%\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\",\n                    marginVertical: \"7%\",\n                  }}\n                  onPress={this.handleSignUp}\n                >\n                  <Text style={{ fontSize: 20, fontWeight: \"bold\" }}>\n                    SIGN UP\n                  </Text>\n                </TouchableOpacity>\n                <View style={{ height: 40 }}></View>\n              </View>\n            </View>\n          </View>\n        </ScrollView>\n      </KeyboardAvoidingView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"black\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}