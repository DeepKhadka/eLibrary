{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/deep/eLibrary/screens/requests.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Container, Content, Spinner, Thumbnail } from \"native-base\";\nimport fire from \"../Firebase\";\nimport FontAwesome from \"@expo/vector-icons/FontAwesome5\";\nimport PP from \"./profileplaceholder\";\n\nvar Requests = function (_Component) {\n  _inherits(Requests, _Component);\n\n  var _super = _createSuper(Requests);\n\n  function Requests() {\n    var _this;\n\n    _classCallCheck(this, Requests);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this._isMounted = false;\n    _this.state = {\n      data: null,\n      reffreshing: false\n    };\n\n    _this.handleRefresh = function () {\n      _this.setState({\n        refreshing: true\n      }, function () {\n        _this.componentDidMount();\n      });\n    };\n\n    _this.emptyComponent = function () {\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          alignItems: \"center\"\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20,\n          fontStyle: \"italic\",\n          fontWeight: \"bold\",\n          color: \"white\"\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 9\n        }\n      }, \"Nothing here, come back later...\"));\n    };\n\n    return _this;\n  }\n\n  _createClass(Requests, [{\n    key: \"deleteDocument\",\n    value: function deleteDocument(itemID) {\n      var _this2 = this;\n\n      fire.firestore().collection(\"USERS\").doc(fire.auth().currentUser.uid.toString()).collection(\"PENDING\").doc(itemID).delete().then(function () {\n        _this2.componentDidMount();\n      }).catch(function (error) {\n        Alert.alert(error.toString());\n      });\n    }\n  }, {\n    key: \"acceptRequest\",\n    value: function acceptRequest(itemID) {\n      var _this3 = this;\n\n      fire.firestore().collection(\"USERS\").doc(fire.auth().currentUser.uid.toString()).collection(\"CONNECTED\").doc(itemID).set({\n        fID: itemID\n      }).then(function () {\n        _this3.deleteDocument(itemID);\n      }).then(function () {\n        fire.firestore().collection(\"USERS\").doc(itemID).collection(\"CONNECTED\").doc(fire.auth().currentUser.uid.toString()).set({\n          fID: fire.auth().currentUser.uid.toString()\n        });\n      }).catch(function (err) {\n        Alert.alert(err.toString());\n      });\n    }\n  }, {\n    key: \"handleRequests\",\n    value: function handleRequests() {\n      var _this4 = this;\n\n      var data;\n      return _regeneratorRuntime.async(function handleRequests$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              data = [];\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fire.firestore().collection(\"USERS\").doc(fire.auth().currentUser.uid.toString()).collection(\"PENDING\").get().then(function (querySnapshot) {\n                var results = [];\n                querySnapshot.forEach(function (doc) {\n                  var docRef = fire.firestore().collection(\"USERS\").doc(doc.id).get().then(function (snap) {\n                    data.push({\n                      username: snap.data().username,\n                      ID: snap.id,\n                      profileUri: snap.data().profileUri\n                    });\n                  }, function (error) {\n                    Alert.alert(error.toString());\n                  });\n                  results.push(docRef);\n                });\n                return Promise.all(results);\n              }, function (val) {\n                console.log(val);\n              }).then(function () {\n                _this4.setState({\n                  data: data,\n                  refreshing: false\n                });\n              }).catch(function (error) {\n                console.log(\"Error getting documents: \", error);\n              }));\n\n            case 3:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this.handleRequests();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(SafeAreaView, {\n        style: {\n          flex: 1,\n          backgroundColor: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 7\n        }\n      }, this.state.data ? React.createElement(FlatList, {\n        data: this.state.data,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return React.createElement(View, {\n            style: styles.card,\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }\n          }, React.createElement(View, {\n            style: styles.cardContent,\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }\n          }, React.createElement(View, {\n            style: {\n              flexDirection: \"row\"\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 19\n            }\n          }, React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              _this5.props.navigation.navigate(\"Profile\", {\n                ID: item.ID\n              });\n            },\n            style: {\n              flexDirection: \"row\",\n              alignItems: \"center\"\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 21\n            }\n          }, React.createElement(Thumbnail, {\n            style: {\n              borderWidth: 1,\n              borderColor: \"white\"\n            },\n            source: {\n              uri: item.profileUri ? item.profileUri : PP\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 23\n            }\n          }), React.createElement(Text, {\n            style: {\n              marginLeft: \"5%\",\n              fontSize: 20,\n              fontWeight: \"bold\",\n              color: \"white\"\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 23\n            }\n          }, item.username))), React.createElement(View, {\n            style: {\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n              marginRight: \"5%\",\n              alignItems: \"flex-end\"\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 19\n            }\n          }, React.createElement(View, {\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 21\n            }\n          }, React.createElement(TouchableOpacity, {\n            style: {\n              marginLeft: \"5%\",\n              paddingHorizontal: \"5%\",\n              backgroundColor: \"green\",\n              borderRadius: 50,\n              alignItems: \"center\"\n            },\n            onPress: function onPress() {\n              _this5.acceptRequest(item.ID);\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 23\n            }\n          }, React.createElement(FontAwesome, {\n            name: \"check\",\n            size: 25,\n            color: \"white\",\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 25\n            }\n          })), React.createElement(Text, {\n            style: {\n              fontSize: 15,\n              color: \"white\"\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 23\n            }\n          }, \"Accept\")), React.createElement(View, {\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 21\n            }\n          }, React.createElement(TouchableOpacity, {\n            style: {\n              backgroundColor: \"darkred\",\n              borderRadius: 50,\n              alignItems: \"center\"\n            },\n            onPress: function onPress() {\n              _this5.deleteDocument(item.ID);\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 23\n            }\n          }, React.createElement(FontAwesome, {\n            name: \"times\",\n            size: 25,\n            color: \"white\",\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 25\n            }\n          })), React.createElement(Text, {\n            style: {\n              fontSize: 15,\n              color: \"white\"\n            },\n            __self: _this5,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 23\n            }\n          }, \"Decline\")))));\n        },\n        keyExtractor: function keyExtractor(item) {\n          return item.ID;\n        },\n        ListEmptyComponent: this.emptyComponent,\n        refreshing: this.state.refreshing,\n        onRefresh: this.handleRefresh,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }\n      }) : React.createElement(Container, {\n        style: {\n          backgroundColor: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }\n      }, React.createElement(Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }\n      }, React.createElement(Spinner, {\n        color: \"green\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 15\n        }\n      }))));\n    }\n  }]);\n\n  return Requests;\n}(Component);\n\nexport { Requests as default };\nvar styles = StyleSheet.create({\n  card: {\n    borderRadius: 10,\n    elevation: 4,\n    backgroundColor: \"#272727\",\n    shadowOffset: {\n      width: 1,\n      height: 1\n    },\n    shadowColor: \"white\",\n    shadowOpacity: 0.5,\n    shadowRadius: 5,\n    marginHorizontal: \"2%\",\n    marginVertical: \"2%\"\n  },\n  cardContent: {\n    marginHorizontal: \"3%\",\n    paddingVertical: \"5%\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  }\n});","map":{"version":3,"sources":["/home/deep/eLibrary/screens/requests.js"],"names":["React","Component","Container","Content","Spinner","Thumbnail","fire","FontAwesome","PP","Requests","_isMounted","state","data","reffreshing","handleRefresh","setState","refreshing","componentDidMount","emptyComponent","flex","alignItems","fontSize","fontStyle","fontWeight","color","itemID","firestore","collection","doc","auth","currentUser","uid","toString","delete","then","catch","error","Alert","alert","set","fID","deleteDocument","err","get","querySnapshot","results","forEach","docRef","id","snap","push","username","ID","profileUri","Promise","all","val","console","log","handleRequests","backgroundColor","item","styles","card","cardContent","flexDirection","props","navigation","navigate","borderWidth","borderColor","uri","marginLeft","justifyContent","marginRight","paddingHorizontal","borderRadius","acceptRequest","StyleSheet","create","elevation","shadowOffset","width","height","shadowColor","shadowOpacity","shadowRadius","marginHorizontal","marginVertical","paddingVertical"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  SafeAreaView,\n  TouchableOpacity,\n  Alert,\n  FlatList,\n} from \"react-native\";\nimport { Container, Content, Spinner, Thumbnail } from \"native-base\";\nimport fire from \"../Firebase\";\nimport FontAwesome from \"react-native-vector-icons/FontAwesome5\";\nimport PP from \"./profileplaceholder\";\n\nexport default class Requests extends Component {\n  _isMounted = false;\n\n  state = {\n    data: null,\n    reffreshing: false,\n  };\n\n  handleRefresh = () => {\n    this.setState(\n      {\n        refreshing: true,\n      },\n      () => {\n        this.componentDidMount();\n      }\n    );\n  };\n\n  deleteDocument(itemID) {\n    fire\n      .firestore()\n      .collection(\"USERS\")\n      .doc(fire.auth().currentUser.uid.toString())\n      .collection(\"PENDING\")\n      .doc(itemID)\n      .delete()\n      .then(() => {\n        this.componentDidMount();\n      })\n      .catch((error) => {\n        Alert.alert(error.toString());\n      });\n  }\n\n  acceptRequest(itemID) {\n    fire\n      .firestore()\n      .collection(\"USERS\")\n      .doc(fire.auth().currentUser.uid.toString())\n      .collection(\"CONNECTED\")\n      .doc(itemID)\n      .set({\n        fID: itemID,\n      })\n      .then(() => {\n        this.deleteDocument(itemID);\n      })\n      .then(() => {\n        fire\n          .firestore()\n          .collection(\"USERS\")\n          .doc(itemID)\n          .collection(\"CONNECTED\")\n          .doc(fire.auth().currentUser.uid.toString())\n          .set({\n            fID: fire.auth().currentUser.uid.toString(),\n          });\n      })\n      .catch((err) => {\n        Alert.alert(err.toString());\n      });\n  }\n\n  async handleRequests() {\n    var data = [];\n    return await fire\n      .firestore()\n      .collection(\"USERS\")\n      .doc(fire.auth().currentUser.uid.toString())\n      .collection(\"PENDING\")\n      .get()\n      .then(\n        function (querySnapshot) {\n          var results = [];\n\n          querySnapshot.forEach(function (doc) {\n            var docRef = fire\n              .firestore()\n              .collection(\"USERS\")\n              .doc(doc.id)\n              .get()\n              .then(\n                function (snap) {\n                  data.push({\n                    username: snap.data().username,\n                    ID: snap.id,\n                    profileUri: snap.data().profileUri,\n                  });\n                },\n                function (error) {\n                  Alert.alert(error.toString());\n                }\n              );\n            // push promise from get into results\n            results.push(docRef);\n          });\n          // dbPromise.then() resolves to  a single promise that resolves\n          // once all results have resolved\n          return Promise.all(results);\n        },\n        function (val) {\n          // The Promise was rejected.\n          console.log(val);\n        }\n      )\n      .then(() => {\n        this.setState({\n          data: data,\n          refreshing: false,\n        });\n      })\n      .catch(function (error) {\n        console.log(\"Error getting documents: \", error);\n      });\n  }\n\n  emptyComponent = () => {\n    return (\n      <View style={{ flex: 1, alignItems: \"center\" }}>\n        <Text style={{ fontSize: 20, fontStyle: \"italic\", fontWeight: \"bold\",color:\"white\" }}>\n          Nothing here, come back later...\n        </Text>\n      </View>\n    );\n  };\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.handleRequests();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    return (\n      <SafeAreaView style={{ flex: 1,backgroundColor:\"black\" }}>\n        {this.state.data ? (\n          <FlatList\n            data={this.state.data}\n            renderItem={({ item }) => (\n              <View style={styles.card}>\n                <View style={styles.cardContent}>\n                  <View style={{ flexDirection: \"row\" }}>\n                    <TouchableOpacity\n                      onPress={() => {\n                        this.props.navigation.navigate(\"Profile\", {\n                          ID: item.ID,\n                        });\n                      }}\n                      style={{ flexDirection: \"row\", alignItems: \"center\" }}\n                    >\n                      <Thumbnail\n                        style={{ borderWidth: 1, borderColor: \"white\" }}\n                        source={{\n                          uri: item.profileUri ? item.profileUri : PP,\n                        }}\n                      />\n\n                      <Text\n                        style={{\n                          marginLeft: \"5%\",\n                          fontSize: 20,\n                          fontWeight: \"bold\",\n                          color:\"white\"\n                        }}\n                      >\n                        {item.username}\n                      </Text>\n                    </TouchableOpacity>\n                  </View>\n\n                  <View\n                    style={{\n                      flexDirection: \"row\",\n                      justifyContent: \"space-between\",\n                      marginRight: \"5%\",\n                      alignItems: \"flex-end\",\n                    }}\n                  >\n                    <View>\n                      <TouchableOpacity\n                        style={{\n                          marginLeft: \"5%\",\n                          paddingHorizontal: \"5%\",\n                          backgroundColor: \"green\",\n                          borderRadius: 50,\n                          alignItems: \"center\",\n                        }}\n                        onPress={() => {\n                          this.acceptRequest(item.ID);\n                        }}\n                      >\n                        <FontAwesome name=\"check\" size={25} color=\"white\" />\n                      </TouchableOpacity>\n                      <Text style={{ fontSize: 15,color:\"white\" }}>Accept</Text>\n                    </View>\n                    <View>\n                      <TouchableOpacity\n                        style={{\n                          backgroundColor: \"darkred\",\n                          borderRadius: 50,\n                          alignItems: \"center\",\n                        }}\n                        onPress={() => {\n                          this.deleteDocument(item.ID);\n                        }}\n                      >\n                        <FontAwesome name=\"times\" size={25} color=\"white\" />\n                      </TouchableOpacity>\n                      <Text style={{ fontSize: 15,color:\"white\" }}>Decline</Text>\n                    </View>\n                  </View>\n                </View>\n              </View>\n            )}\n            keyExtractor={(item) => item.ID}\n            ListEmptyComponent={this.emptyComponent}\n            refreshing={this.state.refreshing}\n            onRefresh={this.handleRefresh}\n          />\n        ) : (\n          <Container style={{backgroundColor:\"black\"}}>\n            <Content>\n              <Spinner color=\"green\" />\n            </Content>\n          </Container>\n        )}\n      </SafeAreaView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  card: {\n    borderRadius: 10,\n    elevation: 4,\n    backgroundColor: \"#272727\",\n    shadowOffset: { width: 1, height: 1 },\n    shadowColor: \"white\",\n    shadowOpacity: 0.5,\n    shadowRadius: 5,\n    marginHorizontal: \"2%\",\n    marginVertical: \"2%\",\n  },\n  cardContent: {\n    marginHorizontal: \"3%\",\n    paddingVertical: \"5%\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}