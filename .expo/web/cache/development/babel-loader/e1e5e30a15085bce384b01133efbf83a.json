{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/deep/eLibrary/screens/friends.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Container, Content, Spinner, Thumbnail } from \"native-base\";\nimport fire from \"../Firebase\";\nimport FontAwesome from \"@expo/vector-icons/FontAwesome5\";\nimport PP from \"./profileplaceholder\";\n\nvar Friends = function (_Component) {\n  _inherits(Friends, _Component);\n\n  var _super = _createSuper(Friends);\n\n  function Friends() {\n    var _this;\n\n    _classCallCheck(this, Friends);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this._isMounted = false;\n    _this.state = {\n      data: null,\n      reffreshing: false\n    };\n\n    _this.handleRefresh = function () {\n      _this.setState({\n        refreshing: true\n      }, function () {\n        _this.componentDidMount();\n      });\n    };\n\n    _this.emptyComponent = function () {\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          alignItems: \"center\"\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20,\n          fontStyle: \"italic\",\n          fontWeight: \"bold\"\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }\n      }, \"Nothing here, come back later...\"));\n    };\n\n    return _this;\n  }\n\n  _createClass(Friends, [{\n    key: \"deleteFriend\",\n    value: function deleteFriend(itemID) {\n      var _this2 = this;\n\n      fire.firestore().collection(\"USERS\").doc(fire.auth().currentUser.uid.toString()).collection(\"CONNECTED\").doc(itemID).delete().then(function () {\n        fire.firestore().collection(\"USERS\").doc(itemID).collection(\"CONNECTED\").doc(fire.auth().currentUser.uid.toString()).delete();\n      }).then(function () {\n        _this2.componentDidMount();\n      }).catch(function (error) {\n        Alert.alert(error.toString());\n      });\n    }\n  }, {\n    key: \"handleFriends\",\n    value: function handleFriends() {\n      var _this3 = this;\n\n      var data;\n      return _regeneratorRuntime.async(function handleFriends$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              data = [];\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fire.firestore().collection(\"USERS\").doc(fire.auth().currentUser.uid.toString()).collection(\"CONNECTED\").get().then(function (querySnapshot) {\n                var results = [];\n                querySnapshot.forEach(function (doc) {\n                  var docRef = fire.firestore().collection(\"USERS\").doc(doc.id).get().then(function (snap) {\n                    data.push({\n                      username: snap.data().username,\n                      ID: snap.id,\n                      profileUri: snap.data().profileUri\n                    });\n                  }, function (error) {\n                    Alert.alert(error.toString());\n                  });\n                  results.push(docRef);\n                });\n                return Promise.all(results);\n              }, function (val) {\n                console.log(val);\n              }).then(function () {\n                _this3.setState({\n                  data: data,\n                  refreshing: false\n                });\n              }).catch(function (error) {\n                console.log(\"Error getting documents: \", error);\n              }));\n\n            case 3:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this.handleFriends();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(SafeAreaView, {\n        style: {\n          flex: 1,\n          backgroundColor: \"black\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }\n      }, this.state.data ? React.createElement(FlatList, {\n        data: this.state.data,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return React.createElement(View, {\n            style: styles.card,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }\n          }, React.createElement(View, {\n            style: styles.cardContent,\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }\n          }, React.createElement(View, {\n            style: {\n              flexDirection: \"row\",\n              alignItems: \"center\"\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 19\n            }\n          }, React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              _this4.props.navigation.navigate(\"Profile\", {\n                ID: item.ID\n              });\n            },\n            style: {\n              flexDirection: \"row\",\n              alignItems: \"center\"\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 21\n            }\n          }, React.createElement(Thumbnail, {\n            style: {\n              borderWidth: 1,\n              borderColor: \"white\"\n            },\n            source: {\n              uri: item.profileUri ? item.profileUri : PP\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 23\n            }\n          }), React.createElement(Text, {\n            style: {\n              marginLeft: \"5%\",\n              fontSize: 20,\n              fontWeight: \"bold\",\n              color: \"white\"\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 23\n            }\n          }, item.username))), React.createElement(View, {\n            style: {\n              marginRight: \"5%\"\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 19\n            }\n          }, React.createElement(TouchableOpacity, {\n            style: {\n              backgroundColor: \"darkred\",\n              borderRadius: 50,\n              alignItems: \"center\"\n            },\n            onPress: function onPress() {\n              _this4.deleteFriend(item.ID);\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 21\n            }\n          }, React.createElement(FontAwesome, {\n            name: \"times\",\n            size: 25,\n            color: \"white\",\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 23\n            }\n          })), React.createElement(Text, {\n            style: {\n              fontSize: 15,\n              color: \"white\"\n            },\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 21\n            }\n          }, \"Unfriend\"))));\n        },\n        keyExtractor: function keyExtractor(item) {\n          return item.ID;\n        },\n        ListEmptyComponent: this.emptyComponent,\n        refreshing: this.state.refreshing,\n        onRefresh: this.handleRefresh,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }\n      }) : React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }\n      }, React.createElement(Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }, React.createElement(Spinner, {\n        color: \"green\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 15\n        }\n      }))));\n    }\n  }]);\n\n  return Friends;\n}(Component);\n\nexport { Friends as default };\nvar styles = StyleSheet.create({\n  card: {\n    borderRadius: 10,\n    elevation: 4,\n    backgroundColor: \"#272727\",\n    shadowOffset: {\n      width: 1,\n      height: 1\n    },\n    shadowColor: \"#333\",\n    shadowOpacity: 0.5,\n    shadowRadius: 5,\n    marginHorizontal: \"2%\",\n    marginVertical: \"2%\"\n  },\n  cardContent: {\n    marginHorizontal: \"3%\",\n    paddingVertical: \"5%\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"sources":["/home/deep/eLibrary/screens/friends.js"],"names":["React","Component","Container","Content","Spinner","Thumbnail","fire","FontAwesome","PP","Friends","_isMounted","state","data","reffreshing","handleRefresh","setState","refreshing","componentDidMount","emptyComponent","flex","alignItems","fontSize","fontStyle","fontWeight","itemID","firestore","collection","doc","auth","currentUser","uid","toString","delete","then","catch","error","Alert","alert","get","querySnapshot","results","forEach","docRef","id","snap","push","username","ID","profileUri","Promise","all","val","console","log","handleFriends","backgroundColor","item","styles","card","cardContent","flexDirection","props","navigation","navigate","borderWidth","borderColor","uri","marginLeft","color","marginRight","borderRadius","deleteFriend","StyleSheet","create","elevation","shadowOffset","width","height","shadowColor","shadowOpacity","shadowRadius","marginHorizontal","marginVertical","paddingVertical","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  SafeAreaView,\n  TouchableOpacity,\n  Alert,\n  FlatList,\n} from \"react-native\";\nimport { Container, Content, Spinner, Thumbnail } from \"native-base\";\nimport fire from \"../Firebase\";\nimport FontAwesome from \"react-native-vector-icons/FontAwesome5\";\nimport PP from \"./profileplaceholder\";\n\nexport default class Friends extends Component {\n  _isMounted = false;\n\n  state = {\n    data: null,\n    reffreshing: false,\n  };\n\n  handleRefresh = () => {\n    this.setState(\n      {\n        refreshing: true,\n      },\n      () => {\n        this.componentDidMount();\n      }\n    );\n  };\n\n  deleteFriend(itemID) {\n    fire\n      .firestore()\n      .collection(\"USERS\")\n      .doc(fire.auth().currentUser.uid.toString())\n      .collection(\"CONNECTED\")\n      .doc(itemID)\n      .delete()\n      .then(() => {\n        fire\n          .firestore()\n          .collection(\"USERS\")\n          .doc(itemID)\n          .collection(\"CONNECTED\")\n          .doc(fire.auth().currentUser.uid.toString())\n          .delete();\n      })\n      .then(() => {\n        this.componentDidMount();\n      })\n      .catch((error) => {\n        Alert.alert(error.toString());\n      });\n  }\n\n  async handleFriends() {\n    var data = [];\n\n    return await fire\n      .firestore()\n      .collection(\"USERS\")\n      .doc(fire.auth().currentUser.uid.toString())\n      .collection(\"CONNECTED\")\n      .get()\n      .then(\n        function (querySnapshot) {\n          var results = [];\n\n          querySnapshot.forEach(function (doc) {\n            var docRef = fire\n              .firestore()\n              .collection(\"USERS\")\n              .doc(doc.id)\n              .get()\n              .then(\n                function (snap) {\n                  data.push({\n                    username: snap.data().username,\n                    ID: snap.id,\n                    profileUri: snap.data().profileUri,\n                  });\n                },\n                function (error) {\n                  Alert.alert(error.toString());\n                }\n              );\n            // push promise from get into results\n            results.push(docRef);\n          });\n          // dbPromise.then() resolves to  a single promise that resolves\n          // once all results have resolved\n          return Promise.all(results);\n        },\n        function (val) {\n          // The Promise was rejected.\n          console.log(val);\n        }\n      )\n      .then(() => {\n        this.setState({\n          data: data,\n          refreshing: false,\n        });\n      })\n      .catch(function (error) {\n        console.log(\"Error getting documents: \", error);\n      });\n  }\n\n  emptyComponent = () => {\n    return (\n      <View style={{ flex: 1, alignItems: \"center\" }}>\n        <Text style={{ fontSize: 20, fontStyle: \"italic\", fontWeight: \"bold\" }}>\n          Nothing here, come back later...\n        </Text>\n      </View>\n    );\n  };\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.handleFriends();\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    return (\n      <SafeAreaView style={{ flex: 1, backgroundColor: \"black\" }}>\n        {this.state.data ? (\n          <FlatList\n            data={this.state.data}\n            renderItem={({ item }) => (\n              <View style={styles.card}>\n                <View style={styles.cardContent}>\n                  <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\n                    <TouchableOpacity\n                      onPress={() => {\n                        this.props.navigation.navigate(\"Profile\", {\n                          ID: item.ID,\n                        });\n                      }}\n                      style={{ flexDirection: \"row\", alignItems: \"center\" }}\n                    >\n                      <Thumbnail\n                        style={{ borderWidth: 1, borderColor: \"white\" }}\n                        source={{\n                          uri: item.profileUri ? item.profileUri : PP,\n                        }}\n                      />\n\n                      <Text\n                        style={{\n                          marginLeft: \"5%\",\n                          fontSize: 20,\n                          fontWeight: \"bold\",\n                          color: \"white\",\n                        }}\n                      >\n                        {item.username}\n                      </Text>\n                    </TouchableOpacity>\n                  </View>\n\n                  <View\n                    style={{\n                      marginRight: \"5%\",\n                    }}\n                  >\n                    <TouchableOpacity\n                      style={{\n                        backgroundColor: \"darkred\",\n                        borderRadius: 50,\n                        alignItems: \"center\",\n                      }}\n                      onPress={() => {\n                        this.deleteFriend(item.ID);\n                      }}\n                    >\n                      <FontAwesome name=\"times\" size={25} color=\"white\" />\n                    </TouchableOpacity>\n                    <Text style={{ fontSize: 15, color: \"white\" }}>\n                      Unfriend\n                    </Text>\n                  </View>\n                </View>\n              </View>\n            )}\n            keyExtractor={(item) => item.ID}\n            ListEmptyComponent={this.emptyComponent}\n            refreshing={this.state.refreshing}\n            onRefresh={this.handleRefresh}\n          />\n        ) : (\n          <Container>\n            <Content>\n              <Spinner color=\"green\" />\n            </Content>\n          </Container>\n        )}\n      </SafeAreaView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  card: {\n    borderRadius: 10,\n    elevation: 4,\n    backgroundColor: \"#272727\",\n    shadowOffset: { width: 1, height: 1 },\n    shadowColor: \"#333\",\n    shadowOpacity: 0.5,\n    shadowRadius: 5,\n    marginHorizontal: \"2%\",\n    marginVertical: \"2%\",\n  },\n  cardContent: {\n    marginHorizontal: \"3%\",\n    paddingVertical: \"5%\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}